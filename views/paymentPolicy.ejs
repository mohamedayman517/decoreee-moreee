<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Policy - Decor And More</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet">
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet">
    <link href="/css/darkMode.css" rel="stylesheet">
    <script src="/js/darkMode.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 20px 0;
        }

        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .card-header {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 20px 20px 0 0 !important;
            padding: 25px;
        }

        .card-header h3 {
            font-weight: 600;
            letter-spacing: 1px;
        }

        .card-body {
            padding: 30px;
        }

        h4 {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        h4:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 3px;
        }

        .list-group-item {
            background-color: #f8f9fa;
            border: none;
            margin-bottom: 10px;
            border-radius: 10px !important;
            padding: 15px 20px;
            transition: all 0.3s ease;
        }

        .list-group-item:hover {
            background-color: #e9ecef;
            transform: translateX(10px);
        }

        .list-group-item i {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border: none;
            padding: 12px 35px;
            border-radius: 30px;
            font-weight: 500;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.2);
        }

        .btn-primary i {
            transition: transform 0.3s ease;
        }

        .btn-primary:hover i {
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .card-body {
                padding: 20px;
            }
            
            .list-group-item {
                padding: 12px 15px;
            }
        }
    </style>
  </head>
  <body>
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
          <div class="card shadow-lg border-0">
            <div class="card-body p-4 p-md-5">
              <h1 class="text-center mb-4" style="font-size: 35px;">Payment
                Policy</h1>

              <div class="policy-content mb-4">
                <div class="mb-4">
                  <h4>Subscription Terms</h4>
                  <div class="list-group">
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      Monthly subscription fee: 1500 EGP
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      Payment is required before account activation
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      Subscription is automatically renewed monthly
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      You can cancel your subscription at any time
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      No refunds for partial months
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-circle text-warning"></i>
                      A 10% commission is deducted for every Booking with you.
                    </div>
                  </div>
                </div>

                <div class="mb-4">
                  <h4>Payment Methods</h4>
                  <div class="list-group">
                    <div class="list-group-item">
                      <i class="fas fa-credit-card text-warning"></i>
                      Credit/Debit Cards (Visa, MasterCard)
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-shield-alt text-warning"></i>
                      Secure payment processing
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-lock text-warning"></i>
                      Your payment information is encrypted
                    </div>
                  </div>
                </div>

                <div class="mb-4">
                  <h4>Privacy Policy</h4>
                  <div class="list-group">
                    <div class="list-group-item">
                      <i class="fas fa-user-shield text-warning"></i>
                      We do not store your payment details
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-check-double text-warning"></i>
                      All transactions are secure
                    </div>
                    <div class="list-group-item">
                      <i class="fas fa-database text-warning"></i>
                      Your data is protected
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="d-flex justify-content-between align-items-center mt-4">
                <button onclick="cancelRegistration()"
                  class="btn btn-danger px-4">
                  <i class="fas fa-times me-2"></i>Cancel Registration
                </button>
                <a href="/payment-engineer?engineerId=<%= engineerId %>"
                  class="btn btn-primary px-4">
                  <i class="fas fa-check me-2"></i>Continue to Payment
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        async function cancelRegistration() {
            const result = await Swal.fire({
                title: 'Are you sure?',
                text: "You will lose all your registration data!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#dc3545',
                cancelButtonColor: '#6c757d',
                confirmButtonText: 'Yes, cancel registration',
                cancelButtonText: 'No, keep registration'
            });

            if (result.isConfirmed) {
                try {
                    const response = await fetch('/cancel-registration', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ engineerId: '<%= engineerId %>' })
                    });

                    const data = await response.json();

                    if (response.ok) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Registration Cancelled',
                            text: 'Your registration has been cancelled successfully',
                            confirmButtonColor: '#28a745'
                        }).then(() => {
                            window.location.href = '/';
                        });
                    } else {
                        throw new Error(data.message || 'Failed to cancel registration');
                    }
                } catch (error) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: error.message,
                        confirmButtonColor: '#dc3545'
                    });
                }
            }
        }
    </script>
  </body>
</html>
